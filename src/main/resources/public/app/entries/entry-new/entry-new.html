<div class="actionBar" layout-align="space-between center" layout="row">
    <div ng-click="onBack()" style="padding: 1rem; cursor: pointer; outline: none">
        <i class="fa fa-arrow-left" style="color: black; cursor: pointer; outline: none; font-size: 15pt;"></i>
    </div>

    <div layout="row">
        <div ng-click="onSave($event)" style="padding: 1rem; cursor: pointer; outline: none">
            <i class="fa fa-save" style="color: black; cursor: pointer; outline: none; font-size: 15pt; margin-top: 5px;"></i>
        </div>
    </div>
</div>
<div class="viewContentWrapperWithActionBar" style="min-height: calc(100% - 64px); height: calc(100% - 64px);">
    <div layout="row" style="width: 100%;">
        <div flex-gt-md=30 flex-md=20 flex-sm=5 flex-xs=5></div>

        <div flex-gt-md=40 flex-md=60 flex-sm=90 flex-xs=90>

            <div class="detailsSectionHeader">Entry Details</div>

            <section class="detailsSectionContent">
                <md-input-container class="inputContainerWithError">
                    <label>Entry Type</label>
                    <md-select ng-disabled=true ng-model="entry.entryTypeGuid" md-on-open="getEntryTypes()" ng-disabled="entryGuid" ng-change="$root.onFormElementChange('entryRequestDto_entryTypeGuid'); onEntryTypeChange()">
                        <md-option ng-repeat="entryType in entryTypes" value="{{entryType.entryTypeGuid}}">
                            {{entryType.name}}
                        </md-option>
                    </md-select>
                    <span ng-style="{'visibility': $root.formElementsErrors.entryRequestDto_entryTypeGuid}" class="formItemErrorMessage">{{$root.formElementsErrors.entryRequestDto_entryTypeGuid}}</span>
                </md-input-container>

                <div class="chipsWrapper">
                    <md-chips ng-model="selectedProjectGroups" md-autocomplete-snap md-require-match="true">
                        <md-autocomplete md-search-text="groupSearchText" md-items="item in searchProjectGroup(groupSearchText)" md-item-text="item.name"
                        placeholder="Groups" md-no-cache="true">
                            <span md-highlight-text="groupSearchText">{{item.groupName}}</span>
                        </md-autocomplete>
                        <md-chip-template>
                            <span>{{$chip.groupName}}
                            </span>
                        </md-chip-template>
                    </md-chips>
                </div>
                <md-input-container class="lastSectionInputContainer" ng-if="entry.entryTypeGuid === '1'">
                    <label>Description</label>
                    <textarea ng-model="entry.description" columns="1"></textarea>
                </md-input-container>
                <!--<md-button type="submit" id="submitBtn " ng-click="onSaveEntryDetails()" class="md-raised md-primary detailsSectionButton">Save</md-button>                -->
            </section>

            <div ng-if="entry.entryTypeGuid === '1'" class="detailsSectionHeader">Deficiency Details</div>

            <section ng-if="entry.entryTypeGuid === '1'" class="detailsSectionContent">
                <md-input-container>
                    <label>Status</label>
                    <md-select ng-model="entry.deficiencyDetails.entryStatusGuid" md-on-open="getDeficiencyStatuses()" ng-change="$root.onFormElementChange('entryRequestDto_entryTypeGuid'); onEntryTypeChange()">
                        <md-option ng-repeat="deficiencyStatus in deficiencyStatuses" value="{{deficiencyStatus.entryStatusGuid}}">
                            {{deficiencyStatus.name}}
                        </md-option>
                    </md-select>
                    <!--<span ng-style="{'visibility': $root.formElementsErrors.deficiencyDetailsRequestDto_entryStatusGuid}" class="formItemErrorMessage">{{$root.formElementsErrors.deficiencyDetailsRequestDto_entryStatusGuid}}</span>                    -->
                </md-input-container>

                <div class="lastSectionDateInput">
                    <md-datepicker ng-model="entry.deficiencyDetails.dueDate" md-placeholder="Due Date" style="margin-left: -0.8rem;" md-min-date="minDueDate">
                    </md-datepicker>
                </div>
            </section>

            <div ng-if="entry.entryTypeGuid === '2'">
                <div class="detailsSectionHeader">Contact Details</div>

                <section class="detailsSectionContent">
                    <md-input-container>
                        <label>Contact Type</label>
                        <md-select ng-model="entry.contactDetails.contactTypeGuid" md-on-open="getContactTypes()" ng-change="onContactTypeChange()">
                            <md-option ng-repeat="contactType in contactTypes" value="{{contactType.contactTypeGuid}}">
                                {{contactType.name}}
                            </md-option>
                        </md-select>
                    </md-input-container>

                    <div ng-if="entry.contactDetails.contactTypeGuid === '1'">
                        <md-input-container>
                            <label>First Name</label>
                            <input type="text" ng-model="entry.contactDetails.personFirstName">
                        </md-input-container>
                        <md-input-container>
                            <label>Last Name</label>
                            <input type="text" ng-model="entry.contactDetails.personLastName">
                        </md-input-container>
                        <md-input-container>
                            <label>Mobile Phone</label>
                            <input type="text" ng-model="entry.contactDetails.personMobilePhone">
                        </md-input-container>
                        <md-input-container>
                            <label>Email</label>
                            <input type="email" ng-model="entry.contactDetails.personEmail">
                        </md-input-container>
                        <md-input-container class="lastSectionInputContainer">
                            <label>Address</label>
                            <input type="text" ng-model="entry.contactDetails.personAddress">
                        </md-input-container>
                    </div>

                    <div ng-if="entry.contactDetails.contactTypeGuid === '2'">
                        <md-input-container>
                            <label>Organization Name</label>
                            <input type="text" ng-model="entry.contactDetails.organizationName">
                        </md-input-container>
                        <md-input-container>
                            <label>Web Site</label>
                            <input type="text" ng-model="entry.contactDetails.organizationWebSite">
                        </md-input-container>
                        <md-input-container>
                            <label>Contact Phone</label>
                            <input type="text" ng-model="entry.contactDetails.organizationContactPhone">
                        </md-input-container>
                        <md-input-container>
                            <label>Contact Email</label>
                            <input type="email" ng-model="entry.contactDetails.organizationContactEmail">
                        </md-input-container>
                        <md-input-container class="lastSectionInputContainer">
                            <label>Address</label>
                            <input type="text" ng-model="entry.contactDetails.organizationAddress">
                        </md-input-container>
                    </div>
                </section>
                
                <div class="detailsSectionHeader">Photo</div>
                <section class="detailsSectionContent">
                    <div layout="row" layout-align="end">
                        <div ng-style="{ 'width': '255px', 'height': '255px', 'background': 'url(' + photoUrl + ')',
                'background-size': 'cover', 'background-repeat': 'no-repeat', 'background-position': 'center'}"></div>
                    </div>
                    <div layout="column" layout-align="end">
                        <md-button type="submit" id="submitBtn" class="md-raised md-primary
                         detailsSectionButton" style="margin-left: 0px;">Change Photo</md-button>
                        <input id="ContactPhoto" type="file" name="img" ngf-select ng-model="file" accept="image/*" ngf-max-size="5MB" ngf-change=onUpload($file)
                        style="opacity: 0; height: 36px; z-index: 1; margin-top: -40px;">
                    </div>
                </section>                
            </div>
        </div>
        <div flex-gt-md=30 flex-md=20 flex-sm=5 flex-xs=5></div>
    </div>
</div>